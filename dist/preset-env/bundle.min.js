!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.for-each.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.array.last-index-of.js"),require("core-js/modules/es.number.parse-int.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.string.repeat.js"),require("core-js/modules/es.array.is-array.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.date.to-string.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.function.bind.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.date.to-json.js"),require("core-js/modules/web.url.to-json.js"),require("faker")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es.object.keys.js","core-js/modules/es.array.for-each.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.array.find.js","core-js/modules/es.function.name.js","core-js/modules/es.array.last-index-of.js","core-js/modules/es.number.parse-int.js","core-js/modules/es.number.constructor.js","core-js/modules/es.array.iterator.js","core-js/modules/es.object.to-string.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.array.includes.js","core-js/modules/es.string.includes.js","core-js/modules/es.string.repeat.js","core-js/modules/es.array.is-array.js","core-js/modules/es.array.index-of.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.split.js","core-js/modules/es.array.concat.js","core-js/modules/es.date.to-string.js","core-js/modules/es.regexp.to-string.js","core-js/modules/es.string.replace.js","core-js/modules/es.function.bind.js","core-js/modules/es.array.join.js","core-js/modules/es.date.to-json.js","core-js/modules/web.url.to-json.js","faker"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).omg={},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e.faker)}(this,(function(e,r,t,n,a,s,o,i,u,l,f,c,d,m,h,y,p,j,g,v,_,b,x,k,R,M,N,S){"use strict";function T(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Q=T(S);function E(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function P(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function q(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw s}}}}var w=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(E(this,e),!r)throw new Error("metadata not provided");t.rules||(t.rules={}),this._predefinedValuesConfig=t.rules.predefined||{},this._skipMockGeneration=t.rules.skipMockGeneration||[],this._distinctValues=t.rules.distinctValues||[],this._variables=t.rules.variables||{},this._fakerConfig=t.rules.faker||{},this._customNumberOfEntities=t.rules.lengthOf||{},this._numberOfEntities=t.defaultLengthOfEntitySets||30,this._rootUri=t.mockDataRootURI||"","/"!==this._rootUri.substr(this._rootUri.length-1)&&(this._rootUri="".concat(this._rootUri,"/")),this._predefinedChosenValues={},this._prepareMetadata(r)}var r,t,n;return r=e,(t=[{key:"createMockData",value:function(){var e=this._findEntitySets(this._oMetadata),r=Object.keys(e);return this._skipMockGeneration.forEach((function(t){r.find((function(e){return e===t}))&&delete e[t]})),this._findEntityTypes(this._oMetadata),this._generateMockdata(e,this._oMetadata),this._oMockdata}},{key:"_prepareMetadata",value:function(e){try{this._oMetadata=jQuery.parseXML(e)}catch(e){throw new Error("Metadata parsing error: ".concat(e))}}},{key:"_generateMockdata",value:function(e,r){var t=this,n={},a=this._getRootUri();jQuery.each(e,(function(e,a){var s={};s[a.name]=a,n[e]=t._generateODataMockdataForEntitySet(s,r)[e]})),jQuery.each(e,(function(e,r){for(var a in r.navprops)for(var s=r.navprops[a],o=s.from.propRef.length,i=0;i<o;i++)for(var u=0;u<n[e].length;u++){var l=n[e][u];if(t._predefinedValuesConfig[s.name]&&t._predefinedValuesConfig[s.name][s.to.propRef[i]]){var f=t._predefinedChosenValues[s.name][s.to.propRef[i]];l[s.from.propRef[i]]=f[Math.floor(Math.random()*f.length)]}else n[s.to.entitySet][u][s.to.propRef[i]]=l[s.from.propRef[i]]}})),jQuery.each(e,(function(e,r){jQuery.each(n[e],(function(n,s){s.__metadata={uri:a+e+"("+t._createKeysString(r,s)+")",type:r.schema+"."+r.type},jQuery.each(r.navprops,(function(n){s[n]={__deferred:{uri:a+e+"("+t._createKeysString(r,s)+")/"+n}}}))}))})),this._oMockdata=n}},{key:"_generateODataMockdataForEntitySet",value:function(e,r){var t=this,n={},a=this._findEntityTypes(r),s=this._findComplexTypes(r);return jQuery.each(e,(function(e,r){n[e]=t._generateDataFromEntitySet(r,a,s)})),n}},{key:"_findEntityTypes",value:function(e){var r={};return jQuery(e).find("EntityType").each((function(e,t){var n=jQuery(t);r[n.attr("Name")]={name:n.attr("Name"),properties:[],keys:[]},n.find("Property").each((function(e,t){var a=jQuery(t),s=a.attr("Type");r[n.attr("Name")].properties.push({schema:s.substring(0,s.lastIndexOf(".")),type:s.substring(s.lastIndexOf(".")+1),name:a.attr("Name"),precision:a.attr("Precision"),scale:a.attr("Scale"),maxLength:a.attr("MaxLength")?Number.parseInt(a.attr("MaxLength")):void 0})})),n.find("PropertyRef").each((function(e,t){var a=jQuery(t).attr("Name");r[n.attr("Name")].keys.push(a)}))})),r}},{key:"_findComplexTypes",value:function(e){var r={};return jQuery(e).find("ComplexType").each((function(e,t){var n=jQuery(t);r[n.attr("Name")]={name:n.attr("Name"),properties:[]},n.find("Property").each((function(e,t){var a=jQuery(t),s=a.attr("Type");r[n.attr("Name")].properties.push({schema:s.substring(0,s.lastIndexOf(".")),type:s.substring(s.lastIndexOf(".")+1),name:a.attr("Name"),precision:a.attr("Precision"),scale:a.attr("Scale")})}))})),r}},{key:"_generateDataFromEntitySet",value:function(e,r,t){var n,a=r[e.type],s=[];n=this._customNumberOfEntities[e.name]?this._customNumberOfEntities[e.name]:this._numberOfEntities;for(var o=0;o<n;o++)s.push(this._generateDataFromEntity(a,o+1,t));return this._distinctValues.includes(e.name)&&(s=this._removeDuplicates(s,a.keys)),s}},{key:"_removeDuplicates",value:function(e,r){var t=[],n="x".repeat(r.length),a=!0;return e.forEach((function(e){for(var s=function(s){var o="";if(r.forEach((function(r){t[s][r]===e[r]&&(o+="x")})),o===n)return a=!1,"break"},o=0;o<t.length&&"break"!==s(o);o++);a&&t.push(e),a=!0})),t}},{key:"_generateDataFromEntity",value:function(e,r,t){var n={};if(!e)return n;for(var a=0;a<e.properties.length;a++){var s=e.properties[a];n[s.name]=this._generatePropertyValue(s,t,r,e,n)}return n}},{key:"_generatePropertyValue",value:function(e,r,t,n,a){if(a[e.name])return a[e.name];if(this._predefinedValuesConfig[n.name]&&this._predefinedValuesConfig[n.name][e.name]){this._predefinedChosenValues[n.name]||(this._predefinedChosenValues[n.name]={}),this._predefinedChosenValues[n.name][e.name]||(this._predefinedChosenValues[n.name][e.name]=[]);var s,o=this._predefinedValuesConfig[n.name][e.name];if(Array.isArray(o))return s=o[Math.floor(Math.random()*o.length)],this._predefinedChosenValues[n.name][e.name].push(s),s;if("string"==typeof o&&-1!==o.indexOf("$ref")){var i=o.split(":")[1];if(this._variables&&this._variables[i]){var u=this._variables[i];return Array.isArray(u)?(s=u[Math.floor(Math.random()*u.length)],this._predefinedChosenValues[n.name][e.name].push(s),s):u}throw new Error("Variable ".concat(o," not found"))}if(o.reference)if(a[o.reference]){var l=a[o.reference];if(o.values){var f,c=q(o.values);try{for(c.s();!(f=c.n()).done;){var d=f.value;if(d.key&&d.key===l)return d.value?d.value:"missing value"}}catch(e){c.e(e)}finally{c.f()}}}else for(var m in n.properties)if(n.properties[m].name===o.reference){var h=n.properties[m];return a[h.name]=this._generatePropertyValue(h,r,t,n,a),this._generatePropertyValue(e,r,t,n,a)}}if(this._fakerConfig[n.name]&&this._fakerConfig[n.name][e.name]){var y,p=this._fakerConfig[n.name][e.name];try{if(-1!==p.indexOf("{{"))y=Q.default.fake(p);else{var j=p.split(".");y=Q.default[j[0]][j[1]].call()}return e.maxLength&&(y=y.substring(0,e.maxLength)),y}catch(r){throw new Error("faker.js call error, check the config for ".concat(n.name,"/").concat(e.name))}}var g=t;switch(g||(g=Math.floor(1e4*this._getPseudoRandomNumber("String"))+101),e.type){case"String":var v=e.name+" "+g;return e.maxLength&&(v=e.name.substring(0,e.maxLength-g.toString().length-1)+" "+g),v;case"DateTime":var _=new Date;return _.setFullYear(2e3+Math.floor(20*this._getPseudoRandomNumber("DateTime"))),_.setDate(Math.floor(30*this._getPseudoRandomNumber("DateTime"))),_.setMonth(Math.floor(12*this._getPseudoRandomNumber("DateTime"))),_.setMilliseconds(0),"/Date("+_.getTime()+")/";case"Int16":case"Int32":case"Int64":return Math.floor(1e4*this._getPseudoRandomNumber("Int"));case"Decimal":return Math.floor(1e6*this._getPseudoRandomNumber("Decimal"))/100;case"Boolean":return this._getPseudoRandomNumber("Boolean")<.5;case"Byte":return Math.floor(10*this._getPseudoRandomNumber("Byte"));case"Double":return 10*this._getPseudoRandomNumber("Double");case"Single":return 1e9*this._getPseudoRandomNumber("Single");case"SByte":return Math.floor(10*this._getPseudoRandomNumber("SByte"));case"Time":return"PT"+Math.floor(23*this._getPseudoRandomNumber("Time"))+"H"+Math.floor(59*this._getPseudoRandomNumber("Time"))+"M"+Math.floor(59*this._getPseudoRandomNumber("Time"))+"S";case"Guid":return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*this._getPseudoRandomNumber("Guid")|0;return("x"===e?r:3&r|8).toString(16)}.bind(this));case"Binary":for(var b="",x=0,k=Math.floor(4294967295*this._getPseudoRandomNumber("Binary")-2147483648);x<32;x++,b+=String(k>>>31),k<<=1);return b;case"DateTimeOffset":var R=new Date;return R.setFullYear(2e3+Math.floor(20*this._getPseudoRandomNumber("DateTimeOffset"))),R.setDate(Math.floor(30*this._getPseudoRandomNumber("DateTimeOffset"))),R.setMonth(Math.floor(12*this._getPseudoRandomNumber("DateTimeOffset"))),R.setMilliseconds(0),"/Date("+R.getTime()+"+0000)/";default:return this._generateDataFromEntity(r[e.type],g,r)}}},{key:"_getPseudoRandomNumber",value:function(e){return this._iRandomSeed||(this._iRandomSeed={}),this._iRandomSeed.hasOwnProperty(e)||(this._iRandomSeed[e]=0),this._iRandomSeed[e]=25214903917*(this._iRandomSeed[e]+11)%0xffffffffffff,this._iRandomSeed[e]/0xffffffffffff}},{key:"_createKeysString",value:function(e,r){var t=this,n="";return r&&jQuery.each(e.keys,(function(a,s){n&&(n+=",");var o=r[s];if("Edm.String"===e.keysType[s]?o=encodeURIComponent("'"+o+"'"):"Edm.DateTime"===e.keysType[s]?(o=t._getDateTime(o),o=encodeURIComponent(o)):"Edm.Guid"===e.keysType[s]&&(o="guid'"+o+"'"),1===e.keys.length)return n+=o;n+=s+"="+o})),n}},{key:"_findEntitySets",value:function(e){var r={},t=jQuery(e).find("Principal"),n=jQuery(e).find("Dependent");jQuery(e).find("EntitySet").each((function(e,t){var n=jQuery(t),a=/((.*)\.)?(.*)/.exec(n.attr("EntityType"));r[n.attr("Name")]={name:n.attr("Name"),schema:a[2],type:a[3],keys:[],keysType:{},navprops:{}}}));var a=function(e,r,a,s){var o=jQuery(a).find("End[Role='"+e+"']").attr("EntitySet"),i=jQuery(r).find("End[Role='"+e+"']").attr("Multiplicity"),u=[],l=jQuery(r).find("ReferentialConstraint > [Role='"+e+"']");return l&&l.length>0?jQuery(l[0]).children("PropertyRef").each((function(e,r){u.push(jQuery(r).attr("Name"))})):jQuery(s?t:n).each((function(r,t){if(e===jQuery(t).attr("Role"))return jQuery(t).children("PropertyRef").each((function(e,r){u.push(jQuery(r).attr("Name"))})),!1})),{role:e,entitySet:o,propRef:u,multiplicity:i}};return jQuery.each(r,(function(r,t){var n=jQuery(e).find("EntityType[Name='"+t.type+"']"),s=jQuery(n).find("PropertyRef");jQuery.each(s,(function(e,r){var a=jQuery(r).attr("Name");t.keys.push(a),t.keysType[a]=jQuery(n).find("Property[Name='"+a+"']").attr("Type")}));var o=jQuery(e).find("EntityType[Name='"+t.type+"'] NavigationProperty");jQuery.each(o,(function(r,n){var s=jQuery(n),o=s.attr("Relationship").split("."),i=jQuery(e).find("AssociationSet[Association = '"+o.join(".")+"']"),u=o.pop(),l=jQuery(e).find("Association[Name = '"+u+"']");t.navprops[s.attr("Name")]={name:s.attr("Name"),from:a(s.attr("FromRole"),l,i,!0),to:a(s.attr("ToRole"),l,i,!1)}}))})),r}},{key:"_getRootUri",value:function(){var e=this._rootUri;return e=e&&/([^?#]*)([?#].*)?/.exec(e)[1]}},{key:"_getDateTime",value:function(e){if(e)return"datetime'"+new Date(Number(e.replace("/Date(","").replace(")/",""))).toJSON().substring(0,19)+"'"}}])&&P(r.prototype,t),n&&P(r,n),e}();e.ODataMockGenerator=w}));
//# sourceMappingURL=bundle.min.js.map
